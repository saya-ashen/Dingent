# UI Changes for Guest Access Control (UI å˜æ›´è¯´æ˜)

## Settings Dialog - General Tab (è®¾ç½®å¯¹è¯æ¡† - å¸¸è§„é€‰é¡¹å¡)

### Location (ä½ç½®)
- Workspace Settings â†’ General Tab
- å·¥ä½œç©ºé—´è®¾ç½® â†’ å¸¸è§„é€‰é¡¹å¡

### UI Components Added (æ–°å¢ UI ç»„ä»¶)

#### 1. Basic Information Section (åŸºæœ¬ä¿¡æ¯éƒ¨åˆ†)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Basic Information                                        â”‚
â”‚                                                          â”‚
â”‚ Workspace Name                                          â”‚
â”‚ [Input: Workspace name                              ]   â”‚
â”‚                                                          â”‚
â”‚ Description                                             â”‚
â”‚ [Input: Workspace description (optional)           ]   â”‚
â”‚                                                          â”‚
â”‚ [Save Changes]                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. Guest Access Section (æ¸¸å®¢è®¿é—®éƒ¨åˆ†)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŒ Guest Access                              [Toggle]   â”‚
â”‚    Allow visitors to access your workspace              â”‚
â”‚    without signing in                                   â”‚
â”‚                                                          â”‚
â”‚  When ENABLED:                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ”— Shareable Guest Link                          â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚ [https://app.com/my-workspace/chat    ] [Copy]   â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚ Share this link with anyone you want to grant    â”‚  â”‚
â”‚  â”‚ guest access. Guests can chat with AI agents     â”‚  â”‚
â”‚  â”‚ but cannot access workspace settings.            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â„¹ï¸ Security Note                                  â”‚  â”‚
â”‚  â”‚ Guest conversations are isolated and guests       â”‚  â”‚
â”‚  â”‚ cannot access other users' data.                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### User Flow (ç”¨æˆ·æµç¨‹)

1. **Owner Opens Settings (æ‰€æœ‰è€…æ‰“å¼€è®¾ç½®)**
   - Click settings icon in workspace
   - Select "General" from left sidebar

2. **Enable Guest Access (å¯ç”¨æ¸¸å®¢è®¿é—®)**
   - Toggle "Guest Access" switch to ON
   - Shareable link section appears below
   - Link format: `https://[domain]/[workspace-slug]/chat`

3. **Share Link (åˆ†äº«é“¾æ¥)**
   - Click "Copy" button to copy link to clipboard
   - Share link via email, messaging, etc.
   - Guests click link and can start chatting immediately

4. **Disable Guest Access (ç¦ç”¨æ¸¸å®¢è®¿é—®)**
   - Toggle switch to OFF
   - Link section disappears
   - New guests cannot access the workspace
   - Existing guest conversations remain but guests cannot continue

### Visual Elements (è§†è§‰å…ƒç´ )

#### Colors & Icons (é¢œè‰²å’Œå›¾æ ‡)
- Globe icon (ğŸŒ) for guest access section
- External link icon (ğŸ”—) for shareable link
- Copy icon for copy button
- Blue info box for security note
- Toggle switch (on/off state)

#### Spacing & Layout (é—´è·å’Œå¸ƒå±€)
- Section spacing: 32px between sections
- Left padding for nested content: 24px
- Border radius for boxes: 8px
- Button sizes: Small (sm) for actions

### States (çŠ¶æ€)

#### Guest Access Disabled (æ¸¸å®¢è®¿é—®ç¦ç”¨)
```
ğŸŒ Guest Access                              [OFF]
   Allow visitors to access your workspace
   without signing in
```

#### Guest Access Enabled (æ¸¸å®¢è®¿é—®å¯ç”¨)
```
ğŸŒ Guest Access                              [ON]
   Allow visitors to access your workspace
   without signing in

   [Shareable link section visible]
   [Security note visible]
```

#### Loading State (åŠ è½½çŠ¶æ€)
- Toggle switch shows loading spinner
- Save button disabled with loading text
- Form inputs disabled during update

### Error Handling (é”™è¯¯å¤„ç†)

#### Success Messages (æˆåŠŸæ¶ˆæ¯)
- "Guest access enabled" - Toast notification
- "Guest access disabled" - Toast notification
- "Guest link copied to clipboard" - Toast notification
- "Workspace updated successfully" - Toast notification

#### Error Messages (é”™è¯¯æ¶ˆæ¯)
- "Failed to update workspace settings" - Toast notification (red)
- "This workspace does not allow guest access" - API error (403)

### Responsive Design (å“åº”å¼è®¾è®¡)

- Settings dialog: 90vw width, 85vh height
- Max width for content: 2xl (672px)
- Mobile: Stack elements vertically
- Desktop: Optimal spacing and layout

### Accessibility (æ— éšœç¢è®¿é—®)

- Labels for all inputs
- ARIA labels for icons
- Keyboard navigation support
- Screen reader compatible
- Focus indicators on interactive elements

## Technical Implementation (æŠ€æœ¯å®ç°)

### React Components Used (ä½¿ç”¨çš„ React ç»„ä»¶)
- `Dialog` - Settings modal container
- `Switch` - Toggle for guest access
- `Input` - Text inputs for name, description, link
- `Button` - Action buttons
- `Label` - Form labels
- `ScrollArea` - Scrollable content area
- Toast notifications via `sonner`

### State Management (çŠ¶æ€ç®¡ç†)
- `useWorkspaceStore` - Current workspace data
- `useWorkspaceApi` - API calls
- Local state for form inputs
- Loading states for async operations

### API Integration (API é›†æˆ)
- PATCH `/workspaces/{id}` - Update workspace settings
  ```json
  {
    "allow_guest_access": true
  }
  ```

## User Scenarios (ç”¨æˆ·åœºæ™¯)

### Scenario 1: Public Demo (å…¬å¼€æ¼”ç¤º)
Owner wants to share AI assistant with potential customers:
1. Enable guest access
2. Copy link
3. Share in marketing materials
4. Guests try the assistant without signup

### Scenario 2: Limited Time Access (é™æ—¶è®¿é—®)
Owner wants temporary guest access:
1. Enable guest access before event
2. Share link with attendees
3. Disable after event ends
4. Guest access immediately revoked

### Scenario 3: Private Workspace (ç§å¯†å·¥ä½œç©ºé—´)
Owner keeps workspace private:
1. Guest access remains OFF (default)
2. Only invited members can access
3. Guests receive 403 error
4. Secure, members-only collaboration

## Screenshots Locations (æˆªå›¾ä½ç½®)

The following screenshots would show:
1. Settings dialog with General tab selected
2. Guest Access toggle in OFF state
3. Guest Access toggle in ON state with link visible
4. Copy button interaction
5. Toast notification for successful copy
6. Mobile view of the settings panel

## Next Steps for Testing (æµ‹è¯•åç»­æ­¥éª¤)

1. Start Dingent development server
2. Open workspace settings
3. Navigate to General tab
4. Toggle guest access on/off
5. Verify link format
6. Test copy functionality
7. Share link and verify guest access
8. Test access control (enable/disable)
